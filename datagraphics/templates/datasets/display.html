{% extends 'base.html' %}

{% block head_title %}
{% if g.current_user %}
My datasets
{% else %}
Datasets
{% endif %}
{% endblock %}

{% block body_title %}
{% if g.current_user %}
My datasets
{% else %}
Datasets
{% endif %}
{% endblock %}

{% block meta %}
{% if g.current_user %}
<div>
  <a href="{{ url_for('api_datasets.user', username=g.current_user['username']) }}"
     class="badge badge-dark">API</a>
</div>
{% else %}
<div>
  <a href="{{ url_for('api_datasets.public') }}"
     class="badge badge-dark">API</a>
</div>
{% endif %}
{% endblock %} {# block meta #}

{% block supermain %}
{% if g.current_user %}
<div class="row">
  <div class="col-md-10"> {# instead of block main #}
    {{ macros.datasets_table(datasets, show_public=show_public, show_owner=True) }}
  </div>
  <div class="col-md-2">
    <div class="mb-2"> {# instead of block actions #}
      {% include 'dataset/create.html' %}
    </div>
  </div>
</div>
{% else %}
{{ macros.datasets_table(datasets, show_public=show_public, show_owner=True) }}
{% endif %} {# if g.current_user #}
{% endblock %} {# block supermain #}

{% block javascript %}
<script>
  $(function() {
    $("#datasets").DataTable( {
      pagingType: "full_numbers",
      pageLength: 25,
      order: [[{{ 4 + show_public }}, "desc"]]
    });
  });
</script>
{% endblock %}
